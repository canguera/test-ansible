- hosts: nodo
  remote_user: canguera
  become: yes
  become_method: sudo

  tasks:
  - name: "Eliminar usuarios"
    user:
      name: "{{ item.name }}"
      state: absent
      remove: yes
    with_items:
      - { name: 'user1' }
      - { name: 'user3' }

  - name: "Eliminar grupos"
    group:
      name: "{{ item.namegroup }}"
      state: absent
    with_items:
          - { namegroup: 'test1' }
          - { namegroup: 'test2' }
          - { namegroup: 'test3' }
          - { namegroup: 'user4' }
